<aside>
💡

서비스 가입 요청 프로세스를 처리한다.

- WPAY 서비스 연동 참고
  - "./WPAY 서비스 연동 가이드/WPAY 연동 가이드.md"

</aside>

## 목표

- 서비스 가입은 로그인 페이지에서 진행한다.
- WPAY 회원 가입 요청 웹페이지를 window.open (popup 형태)으로 오픈한다.
- 서비스 가입이 완료되면 메인화면으로 이동한다.

## WPAY 회원 가입 진행 조건

- Next Button이 활성화 된 상태에서 클릭을 했을 때 다음 조건을 확인 한다.
  - hNum이 없으면 WPAY 회원 가입을 수행한다.

## WPAY 회원 가입 Web Page Open

- WPAY 서비스 연동 가이드 선택
  - 로그인 페이지에서 선택한 service에 따라 WPAY 연동 가이드를 사용 한다.
  - WPAYSTD: "./WPAY 서비스 연동 가이드/WPAYSTD/1. 회원 가입 요청.md"
  - WPAYSTD2: "./WPAY 서비스 연동 가이드/WPAYSTD2/1. 회원 가입 요청.md"
  - WPAYCST: "./WPAY 서비스 연동 가이드/WPAYCST/1. 회원 가입 요청.md"
  - WPAYPRO: "./WPAY 서비스 연동 가이드/WPAYPRO/1. 회원 가입 요청.md"

- WPAY 회원 가입 web page URL.
  - {site name}
    - site는 로그인 페이지에서 선택한 site를 사용 한다.
  - Domain
    - 로그인 페이지에서 선택한 server에 따라 domain을 설정 한다.
      - src/lib/types/wpayServerType.ts의 PROD_SERVER_DOMAINS를 참고 한다.

- WPAY 회원 가입 성공.
  - authToken을 생성한다.
    - "./1. 프로젝트 목표.md"에 정의 된 정책대로 authToken을 생성 및 저장 한다.

## WPAY 회원 가입 처리 결과 데이터 View 모달 Open 한다

- WPAY 회원 가입 처리가 완료 되고 팝업이 닫히면 View 모달을 오픈한다.
- WPAY 회원 가입 처리 결과 Response Data를 받는다.
- WPAY로 부터 받은 암호화된 데이터 리스트와 복호화된 데이터 리스트를 테이블 형태로 View 모달에 표시 한다.
  - resultMsg의 경우 URL Decode를 수행한 후 "+" 문자가 포함된 경우 공백으로 변경 한다.
- View 모달 하단에 "확인" 버튼을 표시 한다.
  - "확인" 버튼을 클릭하면 WPAY 회원 가입 성공인 경우 메인화면으로 이동하고, 실패한 경우 모달을 닫는다.
    - 상단의 "X" 버튼 클릭도 동일하게 동작 한다.
