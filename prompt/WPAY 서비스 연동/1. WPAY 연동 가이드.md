<aside>
ğŸ’¡

- WPAY ì„œë¹„ìŠ¤ API Request Data, Response Data ì„¤ì • ì •ë³´ë¥¼ ì œê³µ í•œë‹¤.
- WPAY ì„œë¹„ìŠ¤ëŠ” Web Pageë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ê³¼ ì„œë²„ ê°„ API í†µì‹ í•˜ëŠ” ë°©ì‹ì„ ì œê³µ í•œë‹¤.

</aside>

## ìš”ì²­ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦

- WPAY ì„œë¹„ìŠ¤ëŠ” Clientë¡œ ë¶€í„° ë°›ì€ Request Data ì˜ signature í•„ë“œë¥¼ ì´ìš©í•´ ë¬´ê²°ì„±ì„ ê²€ì¦ í•œë‹¤.

## ì‘ë‹µ ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦

- WPAYëŠ” Response Data ë¬´ê²°ì„± ê²€ì¦ì„ ìœ„í•´ signature í•„ë“œ ê°’ì„ ì„¸íŒ… í•œë‹¤.
- ClientëŠ” Response Dataë¥¼ ë°›ì•„ signatureë¥¼ ìƒì„±í•˜ì—¬ WPAYë¡œ ë¶€í„° ë°›ì€ signatureì™€ ë¹„êµ ê²€ì¦ í•  ìˆ˜ ìˆë‹¤.
- WPAYëŠ” Web Pageë¡œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë§Œ Response Dataì— signatureë¥¼ ì„¸íŒ… í•œë‹¤.

## signature ìƒì„± ê·œì¹™

- Request Data, Response Dataì˜ row ì¤‘ Signing Order ì»¬ëŸ¼ì— ê°’ì´ ì¡´ì¬í•˜ëŠ” í•„ë“œë§Œ signatureë¥¼ ìƒì„±í•˜ëŠ”ë° ì‚¬ìš© ëœë‹¤.
- Signing Order í•„ë“œ ìˆœì„œëŒ€ë¡œ ë¬¸ìì—´ ë©”ì‹œì§€ ì„ ë§Œë“ ë‹¤.
  - í•„ë“œëª…=í•„ë“œê°’
  - í•„ë“œ ê°„ ì—°ê²°ì€ â€œ&â€ ë¡œ í•œë‹¤.
  - ë¬¸ìì—´ ë©”ì‹œì§€ ê°€ì¥ ë§ˆì§€ë§‰ì— hash={hashKey ê°’} ì¶”ê°€ë¡œ ì—°ê²° í•œë‹¤.
  - ì•„ë˜ëŠ” javaë¡œ ëœ ì˜ˆì œ ì½”ë“œ ì´ë‹¤.

    ```java
    String mid = "INIwpayT03";
    String wpayUserKey = "SQvRwbGJb2rruRfMrUgHzVMSp7C8jyH59XwP7MVki0Q=";
    String wpayTokenValue = "gB09oEE4gECiuU3KImQbIW5EwxFZa9F+Odt0/keu5kY=";
    String email = "";
    
    String message = "INIwpayT03" +
    "&" + "SQvRwbGJb2rruRfMrUgHzVMSp7C8jyH59XwP7MVki0Q=" +
    "&" + "gB09oEE4gECiuU3KImQbIW5EwxFZa9F+Odt0/keu5kY=" +
    "&" + "" +
    "&" + hashKey;
    ```

- signture ìƒì„± ë¬¸ìì—´ì´ ì™„ì„±ë˜ë©´ SHA256 ìœ¼ë¡œ ì•”í˜¸í™” í•œë‹¤.
- SHA256 ìœ¼ë¡œ ì•”í˜¸í™”ëœ signture byte[] ì€ hexë¡œ ì¸ì½”ë”© í•œë‹¤.
  - ì•„ë˜ëŠ” javaë¡œ ëœ ì˜ˆì œ ì½”ë“œ ì´ë‹¤.

    ```java
    import java.security.MessageDigest;
    ...
    
    public String makeSignature (String message) {
        MessageDigest md MessageDigest.getInstance("SHA-256");
        md.update(message.getByte());
    
        StringBuilder sb = new StringBuilder();
    
        for(byte b : md.digest()) {
            String hex = Integer.toHexString(0xff & b);
            if(hex.length() == 1) {
                sb.append("0");
            }
                sb.append(hex);
        }
        return sb.toString();
    }
    ```
