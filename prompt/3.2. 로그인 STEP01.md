<aside>
💡

로그인 처리 STEP01: WPAY 회원 가입 정보 조회를 통해 회원 여부를 확인 한다.

- WPAY 서비스 연동 참고
  - "./WPAY 서비스 연동 가이드/WPAY 연동 가이드.md"

</aside>

## 목표

- 로그인 페이지에서 Next 버튼을 클릭 했을 때 WPAY 회원 가입 정보 조회 진행 여부를 판단 한다.
- WPAY 회원 가입 정보 조회가 성공하면 로그인 STEP02를 수행 한다.

## WPAY 회원 가입 정보 조회 연동 조건

- Next Button이 활성화 된 상태에서 클릭을 했을 때 다음 조건을 확인 한다.
  - hNum 값이 존재하면 WPAY 회원 가입 정보 조회를 수행한다.

## WPAY 회원 가입 정보 조회 API 연동

- WPAY 서비스 연동 가이드 선택
  - "./WPAY 서비스 연동 가이드/공통 API/1. WPAY 회원 가입 정보 조회.md"

- WPAY 회원 가입 정보 조회 API URL.
  - {site name}
    - 로그인 페이지 "label: Site" 선택 값에 따라 {site name}을 설정 한다.
      - src/lib/types/wpayServerType.ts의 SITE_OPTIONS를 참고 한다.
  - Domain
    - WPAY 회원 가입 정보 조회 도메인은 src/lib/constants/wpayUrls.ts 의 ServiceType의 "wpaystd" 으로만 연동이 가능 하다.
      - 로그인 페이지에서 선택한 service를 "wpaystd"로 변경 하면 안된다.

- WPAY 회원 가입 정보 조회 성공.
  - 로그인 STEP02를 진행하기 위해 response data의 wpayUserKey를 로그인 STEP02로 보낸다.

## WPAY 회원 가입 정보 조회 결과 데이터 View 모달 Open 한다

- WPAY 회원 가입 정보 조회 API 연동 결과를 모달로 표시 한다.
- WPAY로 부터 받은 암호화된 데이터 리스트와 복호화된 데이터 리스트를 테이블 형태로 View 모달에 표시 한다.
  - resultMsg의 경우 URL Decode를 수행한 후 "+" 문자가 포함된 경우 공백으로 변경 한다.
- View 모달 하단에 API 연동이 성공이면 "확인" 실패면 "회원가입" 버튼을 표시 한다.
  - "확인" 버튼을 클릭하면 로그인 STEP02로 이동한다.
    - 상단의 "X" 버튼을 클릭하면 모달을 닫는다.
  - "회원가입" 버튼을 클릭하면 로그인 페이지에서 입력한 hNum을 삭제하고 "3.1. 서비스 가입"을 수행한다.
    - 상단의 "X" 버튼을 클릭하면 모달을 닫는다.
